<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>新用户</title>
    <link rel="stylesheet" href="asserts/css/style.css" media="screen" type="text/css" />
</head>
<body>
    <ul id="box" th:each="movie:${movies}">
        <li th:name="${movie.getMovie_id()}"><img th:src="@{'movie_poster/' + ${movie.getMovie_name()} + '.jpg'}" /></li>
    </ul>
    <!--<div th:each="movie:${movies}">-->
        <!--<span th:text="${movie.getName()}"></span>-->
        <!--<span th:text="${movie.getScore()}"></span>-->
        <!--<span th:text="${movie.getDescription()}"></span>-->
        <!--<span th:text="${movie.getUrl()}"></span>-->
    <!--</div>-->
    <form action="" th:action="@{/index}" method="post">
        <input type="hidden" id="likes" name="likes">
        <button id="scroll" type="submit" onclick="like_array()">选择完成</button>
    </form>
</body>
<script src="asserts/js/jquery.js"></script>
<script>
    //获取window对象
    var $window = $(window);

    //获取浏览器滚动条所在位置距离最上方的距离
    var window_top = $window.scrollTop();
    //设置一个你想要距离浏览器上方的值
    var header_top = 35;
    //设置定位
    $("#scroll").css({"position":"absolute","top":window_top+header_top});
    //绑定事件，每次浏览器条滚动，则跟着改变位置
    $(function(){
        $window.scroll(function() {
            var window_top = $window.scrollTop();
            var header_top = 35;
            $("#scroll").css({"position":"absolute","top":window_top+header_top});
        });
    });
</script>
<!--<script type="application/javascript">-->
    <!--initComments();-->
    <!--function initComments() {-->
        <!--var movie_id = [[${movie_id}]];-->
        <!--var data;-->
        <!--$.ajax({-->
            <!--async : false,-->
            <!--type : 'POST',-->
            <!--url : "http://localhost:8080/getcomment",-->
            <!--data : {"movie_id": movie_id},-->
            <!--success : function(result) {-->
                <!--data = result;-->
                <!--//console.log(data);-->
                <!--if(data.status == "0"){-->
                    <!--var comments = eval(data.content);-->
                    <!--var html = "";-->
                    <!--for(var i in comments){-->
                        <!--//console.log(comments[i].user_nickname + ":" + comments[i].comment);-->
                        <!--html += '<h2 class="s-margin-2"><small>' + comments[i].user_nickname + '</small></h2>' +  '<hr>' +  '<h5>' + comments[i].comment + '</h5>';-->
                    <!--}-->
                    <!--document.getElementById("wordArea").innerHTML = html;-->
                <!--}else{-->
                    <!--var html = "";-->
                    <!--html += '<h2 class="s-margin-2"><small>暂无评论</small></h2>';-->
                    <!--document.getElementById("wordArea").innerHTML = html;-->
                <!--}-->
            <!--},-->
            <!--error : function(result) {-->
                <!--alert('服务器异常');-->
            <!--}-->
        <!--});-->
    <!--}-->

    <!--function change_movies() {-->
        <!--var word = {};-->
        <!--word.user_id = [[${userid}]];-->
        <!--word.comment = document.getElementById("comment").value;-->
        <!--word.movie_id = [[${movie_id}]];-->
        <!--$.ajax({-->
            <!--async : false,-->
            <!--type : 'POST',-->
            <!--url : "http://localhost:8080/updatecomment",-->
            <!--data : word,-->
            <!--success : function(result) {-->
                <!--alert('发送成功');-->
            <!--},-->
            <!--error : function(result) {-->
                <!--alert('服务器异常');-->
            <!--}-->
        <!--});-->
    <!--}-->
<!--</script>-->
<script>
    var stringRes = "";
    var movie_count = 9;
    var list_map = new Array(movie_count);
    for(var i = 0; i < movie_count; i++){
        Array[i] = 0;
    }
    $('li').click(function () {
        $(this).toggleClass('selected');
        if ($(this).hasClass('selected')){
            list_map[$(this).attr("name")] = 1;
        }else{
            list_map[$(this).attr("name")] = 0;
        }
    });
    function like_array() {
        for(var i = 0; i < list_map.length; i++){
            if(list_map[i] == 1){
                stringRes += (i + ",");
            }
        }
        $("#likes").attr({"value": stringRes});
        // console.log("结果串：" + stringRes);
    }
</script>
</html>